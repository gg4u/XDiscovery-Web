.loading {
	position: relative;
	margin: $column-gutter 0;
	background: url(../images/loading.gif) no-repeat center center;
	background-size: 36px;
	min-height: 36px;
	min-width: 36px;
}

//
// Site
//

.xd-site-header .fixed {
	z-index: 200;
}

.xd-site-footer {
	position: relative;
	background: $footer-bg;

	h4 {
		color: $primary-color;
		margin-bottom: 1em;
	}

	a {
		color: $body-font-color;
		font-weight: 300;
	}

	.legals {
		background: $body-font-color;
		color: $body-bg;

		a {
			color: $body-bg;
		}
	}
}

//
// Page
//

.xd-page-header {
	background: $gray-lighter;
	padding: 1em 0;
	margin-bottom: $column-gutter;

	input {
		height: auto;
	}

	.search-button {
		margin: 0;
		background-color: $gray-lighter;
		border-color: rgb(170, 170, 170);
		border-width: 1px 1px 1px 0;
		border-style: solid;
		color: $body-font-color;
		height: 32px;
		line-height: 32px;
	}

	.back-button {
		min-width: 32px;
		min-height: 32px;
		display: none;
		background: url(../images/header-back-arrow.svg) no-repeat center center;

		@media #{$small} {
			display: inline-block;
		}
	}

	.info-button,
	.share-button {
		min-width: 28px;
		min-height: 28px;
		display: inline-block;
		background: url(../images/info-button.svg) no-repeat center center;
		background-size: cover;
	}

	.share-button {
		background-image: url(../images/share-button.svg);
	}
}

//
// Atlas Map Wall
//
.xd-map-wall {
	margin: 0 (-$column-gutter/2) (-$column-gutter/2);

	.grid-sizer,
	.masonry-brick {
		width: 100%;

		@media #{$small} {
			width: 50%;
		}

		@media #{$medium} {
			width: 33.333%;
		}

		@media #{$large} {
			width: 25%;
		}
	}

	.masonry-brick {
		padding: 0 ($column-gutter/2) ($column-gutter/2);
	}

}

.xd-map-wall-card {
	@include border-radius($global-radius);
	@include box-shadow($gray-light 0px 0px 5px);
	background: white;
	border: 1px solid $gray-light;
	overflow: hidden;
	position: relative;

	.image {
		display: block;
		width: 100%;
	}

	.title {
		margin-top: 0;
		text-align: center;

		> a {
			color: inherit;
			text-decoration: none;
		}

		.sep {
			font-size: 0.5em;
		}

		.custom-title {
			&:before { content: '“'; }
			&:after { content: '”'; }
		}
	}

	.meta {
		text-align: center;
	}

	.content {
		padding: 1.5em;

		&.tabbed {
			border-top: 1px solid $gray-light;
		}

		.sep {
			color: $gray-light;
		}
	}

	.social-footer {
		background: $gray-dark;
		color: white;
		padding-bottom: .5em;
		padding-top: .5em;
		text-align: center;
	}

	.flipside {
		display: none;
		background: $gray-lighter;
		color: white;
		position: absolute;
		top: 0; left: 0; width: 100%; height: 100%;
	}

	.social-buttons-list {
		text-align: center;
		> li {
			float: none;
			display: inline-block;
		}
	}
}

//
// Atlas
//

.xd-atlas-header {
	@extend .fixed;
	margin-top: $topbar-height;
}

.xd-atlas > .sub-nav {
	margin-top: 115px;
}

.xd-atlas-content {
	background: #f5f5f5 url(../images/xd-page-bg.jpg);
	padding-top: $column-gutter;
	padding-bottom: $column-gutter;
	overflow: hidden;
	position: relative;

	&:after {
		@include box-shadow($gray 0px 0px 5px);
		content: '';
		position: absolute;
		top: -1px;
		left: 0;
		width: 100%;
		height: 1px;
	}
}

// Search bar
.xd-atlas-search-button {
	width: 100%;
}

.xd-atlas-col-search-input {
	padding-right: 0;
}

.xd-atlas-col-search-button {
	padding-left: 0;
}

.xd-atlas-emotional-bg {
	position: absolute;
	top: 0; left: 0; width: 100%; height: auto;

}

//
// Graph
//
$graph-page-header-height: 52px;

.xd-graph-page-header {
	min-height: $graph-page-header-height;
	margin-bottom: 0;
	overflow: auto;
	padding: 8px 8px 0;
	position: relative;
	vertical-align: middle;
	z-index: 1;

	.title {
		margin: 0 100px 0 0;
		display: inline-block;
		font-size: 2em;
		font-weight: 300;
		position: relative;
		top: -4px;

		.sep {
			font-size: 0.5em;
		}
	}
}

.xd-graph-tools {
	margin: 8px;
	position: absolute; right: 0; top: 0;
}

.viva-graph {
	position: absolute;
	width: 100%;
	height: 100%;
	overflow: hidden;

	.map-node {
		cursor: pointer;

		&.selected circle,
		&.highlighted circle {
			stroke: $primary-color;
		}

		.map-node-expand {
			display: none;

			text {
				font-weight: bold;
				fill: $body-font-color;
			}
		}

		&.has-descendants .map-node-expand {
			display: block;
		}

		&.has-descendants.expanded .map-node-expand {
			display: none;
		}
	}

	.map-link {
		&.map-link-group-0 { stroke: #ed13d1 }
		&.map-link-group-1 { stroke:#ed1393 }
		&.map-link-group-2 { stroke:#f30b6d }
		&.map-link-group-3 { stroke:#ff0b6d }
		&.map-link-group-4 { stroke:#f20bdd }
		&.map-link-group-5 { stroke:#cc0000 }
		&.map-link-group-6 { stroke:#cccccc }
		&.map-link-group-7 { stroke:#f20b6d }
		&.map-link-group-8 { stroke:#f20b6d }
		&.map-link-group-9 { stroke:#f20b6d }
		&.highlighted { stroke: $primary-color; }
	}
}

.viva-graph-detail-pane {
	padding: ($graph-page-header-height + 10) 10px ($graph-page-header-height - 20px);
	position: absolute;
	top: 0; right: 0; height: 100%;
	z-index: 1;

	> .content {
		@include border-radius($global-radius);
		height: 100%;
		background: $body-bg;
		border: 1px solid $gray-lighter;
		padding-top: 1em;
		padding-bottom: 1em;
		overflow: auto;
	}

	@media #{$small} {
		padding: $graph-page-header-height 0 0;
		width: 40%;

		> .content {
			@include border-radius(0);
		}
	}
}

.graph-share-pane {
	background: rgba(black, 0.6);
	position: absolute;
	width: 100%;
	height: 100%;

	.panel {
		@include border-radius($global-radius);
		background: $body-bg;
		border-color: $gray-light;
		margin: $column-gutter 0;
		text-align: center;
		position: relative;
	}

	.title {
		.sep {
			font-size: 0.5em;
		}
	}

	.inline-list > li {
		float: none;
		display: inline-block;
	}

	.social-button {
		display: block;
	}

	.close-button {
		margin-top: 1em;
	}
}

//
// Custom pages
//
.xd-custom-page-header {
	background: $body-bg;
	padding-bottom: 0;

	.header-content {
		margin-bottom: 1em;
	}

	.header-secondary {
		background: $secondary-color;
	}

	.breadcrumbs {
		margin-bottom: 0;
	}
}

//
// Custom page elements
//

.xd-side-menu {
	list-style: none;
	margin: 0;

	> li {
		> a {
			display: block;
			padding: 0.25em 0;
			position: relative;
		}

		&.active > a:before {
			background: $body-font-color;
			content: '';
			height: 80%;
			left: -1em;
			position: absolute;
			width: 2px;
		}
	}
}

a.xd-back-to-top {
	display: none;
	text-align: right;

	@media #{$small} {
		display: block;
	}
}

//
// Accordion
//

.xd-accordion-section {
	> .title {
		cursor: pointer;
		background: $secondary-color;
		padding: 0 ($column-gutter / 2);
		color: $primary-color;
		margin: 0;
	}

	@media #{$small} {
		> .title {
			padding: 0;
			background: transparent;
			display: none;
		}

		&.active {
			> .title {
				display: block;
			}
		}
	}

	.xd-accordion-content {
		display: none;
		padding: $column-gutter / 2;

		@media #{$small} {
			padding-left: 0;
			padding-right: 0;
		}
	}

	&.active .xd-accordion-content {
		display: block;
	}
}

//
// Carousel
//

.xd-carousel-container {
	position: relative;
	margin-bottom: $column-gutter;
	background: $primary-color;

	.xd-custom-page-content > &:first-child {
		margin-top: (-$column-gutter);
	}

	.xd-carousel-nav {
		@include box-shadow(none);
		border: none;
		margin: 0 ($column-gutter / 2);
		position: absolute;
		width: 15px;
		top: 50%; height: 32px; margin-top: -16px;

		&.prev {
			left: 0;
			background: url(../images/white-back-arrow.svg) no-repeat center center;
		}

		&.next {
			right: 0;
			background: url(../images/white-forward-arrow.svg) no-repeat center center;
		}
	}

	.slogan {
		display: block;
		text-align: center;
		color: white;
		height: 100%;
		font-weight: 300;
		font-size: 40px;
	}

	.rn-carousel-container {
		overflow: hidden;
		background: inherit;
	}

	.rn-carousel-slides {
		padding: $column-gutter 0;
		-webkit-transition: -webkit-transform .2s ease-out;
		-moz-transition: -moz-transform .2s ease-out;
		transition: transform .2s ease-out;

		position: relative;
		white-space: nowrap;
		overflow: visible;
		-webkit-transform: translate(0, 0);
		-moz-transform: translate(0, 0);
		transform: translate(0, 0);
		margin: 0;

		@media #{$small} {
			padding: 7em 0;
		}

		li {
			white-space: normal;
			vertical-align:top;
			display: inline-block;
			width: 100%;
			height: 100%;
			-webkit-backface-visibility: hidden;
			backface-visibility: hidden;
		}
	}

	.rn-carousel-indicator {
		width: 100%;
		text-align: center;
		position: absolute;
		bottom: 0;
		height: 20px;
	}
	.rn-carousel-indicator span {
		padding: 0 5px;
		color: white;
		opacity: 0.5;
		transition: opacity .2s ease-in-out;
		background: transparent;
	}
	.rn-carousel-indicator span.active {
		opacity: 1;
	}
}

//
// Panels
//

.panel {
	.title {
		text-align: center;
		color: $primary-color;
	}

	.more {
		display: block;
		text-align: right;
		&:after {
			content: ' »';
		}
	}

	&.callout {
		background: #F3F7FA;
		border-color: #0042AA;

		p {
			color: $body-font-color;
		}

		.title, a {
			color: #0042AA;
		}

		a:hover {
			color: darken(#0042AA, 5%);
		}
	}
}